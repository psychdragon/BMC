* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
    min-height: 100vh;
}

@media print {
    body {
        background: white;
        padding: 0;
        margin: 0;
    }

    .container {
        box-shadow: none !important;
        border-radius: 0 !important;
        padding: 10mm !important;
        max-width: 100% !important;
        height: 277mm !important;
        page-break-after: avoid;
    }

    h1 {
        font-size: 18pt !important;
        margin-bottom: 3mm !important;
    }

    .subtitle {
        font-size: 10pt !important;
        margin-bottom: 5mm !important;
    }

    .canvas {
        gap: 3mm !important;
        margin-bottom: 4mm !important;
    }

    .box {
        border-radius: 2mm !important;
        padding: 3mm !important;
        border-width: 1.5pt !important;
        background: white !important;
        page-break-inside: avoid;
    }

    .box::before {
        display: none !important;
    }

    .box:hover {
        transform: none !important;
        box-shadow: none !important;
    }

    .box h2 {
        font-size: 10pt !important;
        margin-bottom: 2mm !important;
        padding-bottom: 1mm !important;
    }

    .box li {
        padding: 1mm 0 !important;
        font-size: 8pt !important;
        line-height: 1.3 !important;
        padding-left: 4mm !important;
    }

    .budget {
        padding: 3mm !important;
        border-radius: 2mm !important;
    }

    .budget h3 {
        font-size: 10pt !important;
        margin-bottom: 1mm !important;
    }

    .budget .amount {
        font-size: 16pt !important;
    }
}

.container {
    max-width: 1600px;
    margin: 0 auto;
    /* Removed background and shadow to allow for child elements like menu-container to define their own */
}

/* --- General Page Styling --- */
h1 {
    text-align: center;
    color: #2d3748;
    margin-bottom: 10px;
    font-size: 2.5em;
}

.subtitle {
    text-align: center;
    color: #718096;
    margin-bottom: 30px;
    font-size: 1.1em;
}

.back-link {
    display: block;
    text-align: center;
    margin-top: 20px;
    color: #4a5568;
    text-decoration: none;
}

/* --- Header / Main Navigation --- */
.main-nav {
    max-width: 1200px;
    margin: 0 auto 20px auto;
    background: white;
    padding: 15px 30px;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.main-nav .logo a {
    font-size: 1.5em;
    font-weight: bold;
    color: #2d3748;
    text-decoration: none;
}
.main-nav .nav-links a {
    margin-left: 15px;
    text-decoration: none;
    font-weight: bold;
    color: #4a5568;
    padding: 10px 15px;
    border-radius: 8px;
    transition: all 0.3s ease;
}
.main-nav .nav-links a:hover {
    background-color: #f0f2ff;
    color: #667eea;
}

/* --- Canvas Page Specific --- */
.canvas-container {
    background: white;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.canvas-header {
    text-align: center;
}

.canvas-actions {
    text-align: center;
    margin-bottom: 20px;
}

.canvas-actions button {
    padding: 10px 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
}

.canvas-actions button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
}

.canvas {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: auto auto;
    gap: 15px;
    margin-bottom: 20px;
}

.box {
    border: 3px solid #e2e8f0;
    border-radius: 12px;
    padding: 20px;
    background: linear-gradient(to bottom, #ffffff, #f7fafc);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transform: scaleX(0);
    transition: transform 0.3s ease;
}

.box:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
}

.box:hover::before {
    transform: scaleX(1);
}

.box h2 {
    color: #667eea;
    font-size: 1.1em;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e2e8f0;
}

.box ul {
    list-style: none;
    padding-left: 0;
}

.box li {
    padding: 8px 0;
    color: #4a5568;
    line-height: 1.5;
    position: relative;
    padding-left: 20px;
}

.box li[contenteditable="true"] {
    background-color: #f0f2ff;
    border-radius: 5px;
    outline: 2px dashed #a3b3f7;
}

.box li::before {
    content: '▸';
    position: absolute;
    left: 0;
    color: #667eea;
    font-weight: bold;
}

/* Grid layout for canvas boxes */
.key-partners { grid-column: 1; grid-row: 1 / 3; }
.key-activities { grid-column: 2; grid-row: 1; }
.key-resources { grid-column: 2; grid-row: 2; }
.value-propositions { grid-column: 3; grid-row: 1 / 3; background: linear-gradient(135deg, #667eea15, #764ba215); border: 3px solid #667eea; }
.value-propositions h2 { font-size: 1.3em; color: #5a67d8; }
.customer-relationships { grid-column: 4; grid-row: 1; }
.channels { grid-column: 4; grid-row: 2; }
.customer-segments { grid-column: 5; grid-row: 1 / 3; }
.cost-structure { grid-column: 1 / 3; grid-row: 3; }
.revenue-streams { grid-column: 3 / 6; grid-row: 3; }


/* --- Main Menu Specific --- */
.menu-container {
    text-align: center;
    background: white;
    padding: 50px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 800px;
    margin: 50px auto 0;
}

.menu-nav {
    margin-top: 40px;
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
}

.menu-button {
    display: inline-block;
    padding: 15px 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
    font-size: 1.1em;
    font-weight: bold;
    border-radius: 10px;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.menu-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
}

/* --- Form Container (Generator & Settings) --- */
.form-container {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 800px;
    margin: 40px auto;
}

.generator-form textarea {
    width: 100%;
    padding: 15px;
    border-radius: 10px;
    border: 2px solid #e2e8f0;
    font-size: 1.1em;
    margin-bottom: 20px;
    transition: border-color 0.3s ease;
}

.generator-form textarea:focus {
    border-color: #667eea;
    outline: none;
}

.generator-form button {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}

.generator-form button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
}

/* --- List Container (View Page) --- */
.list-container {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 900px;
    margin: 40px auto;
}
.canvas-list {
    list-style: none;
    padding: 0;
    margin-top: 20px;
}
.canvas-list li {
    margin-bottom: 10px;
}
.canvas-list a {
    display: block;
    padding: 20px;
    background-color: #f7fafc;
    border-radius: 10px;
    border: 2px solid #e2e8f0;
    text-decoration: none;
    color: #2d3748;
    font-weight: bold;
    transition: all 0.3s ease;
}
.canvas-list a:hover {
    transform: translateX(5px);
    border-color: #667eea;
    background-color: #f0f2ff;
}

/* --- New Project List Styles --- */
.project-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 25px;
}

.project-card {
    background-color: #f7fafc;
    border-radius: 10px;
    border: 2px solid #e2e8f0;
    padding: 20px;
    transition: all 0.3s ease;
}

.project-card:hover {
    transform: translateY(-5px);
    border-color: #a3b3f7;
    box-shadow: 0 10px 20px rgba(0,0,0,0.08);
}

.project-title {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #e2e8f0;
    margin-bottom: 15px;
    padding-bottom: 10px;
}

.project-card h2 {
    color: #2d3748;
    font-size: 1.3em;
    border: 2px solid transparent; /* Placeholder for focus style */
    padding: 5px;
    margin: -5px; /* Offset padding */
    border-radius: 5px;
}
.project-card h2[contenteditable="true"]:focus {
    background-color: #f0f2ff;
    border-color: #a3b3f7;
    outline: none;
}

.rename-project-btn {
    background: #e2e8f0;
    border: none;
    border-radius: 5px;
    padding: 8px 12px;
    cursor: pointer;
}
.rename-project-btn:hover {
    background: #cbd5e0;
}

.doc-links-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.view-links, .generate-links {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.doc-links-container h4 {
    font-size: 1em;
    color: #4a5568;
    margin-bottom: 5px;
    border-bottom: 1px solid #e2e8f0;
    padding-bottom: 5px;
}

.no-docs {
    font-style: italic;
    color: #718096;
}

.doc-link, .generate-link {
    text-decoration: none;
    font-weight: bold;
    padding: 10px;
    border-radius: 5px;
    text-align: center;
}

.doc-link {
    background-color: #e2e8f0;
    color: #4a5568;
}
.doc-link:hover {
    background-color: #cbd5e0;
}

.generate-link {
    background-color: #c3dafe;
    color: #2c5282;
}
.generate-link:hover {
    background-color: #a3bffa;
}


/* --- Settings Form Specific --- */
.settings-form {
    margin-top: 20px;
}
.settings-form label {
    display: block;
    margin-bottom: 10px;
    font-weight: bold;
    color: #4a5568;
}
.settings-form input[type="password"] {
    width: 100%;
    padding: 15px;
    border-radius: 10px;
    border: 2px solid #e2e8f0;
    font-size: 1.1em;
    margin-bottom: 20px;
    transition: border-color 0.3s ease;
}
.settings-form input[type="password"]:focus {
    border-color: #667eea;
    outline: none;
}
.settings-form button {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
}
.settings-form button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
}
.status-message {
    margin-top: 15px;
    font-weight: bold;
}


/* --- Responsive Design --- */
@media (max-width: 1200px) {
    .canvas {
        grid-template-columns: repeat(3, 1fr);
    }
    .value-propositions { grid-column: 2; grid-row: 1 / 3; }
    .customer-segments { grid-column: 3; grid-row: 1; }
    .customer-relationships { grid-column: 3; grid-row: 2; }
    .cost-structure { grid-column: 1 / 2; grid-row: 3; }
    .revenue-streams { grid-column: 2 / 4; grid-row: 3; }
}

@media (max-width: 768px) {
    .canvas {
        grid-template-columns: 1fr;
    }
    .box {
        grid-column: 1 !important;
        grid-row: auto !important;
    }
    h1 {
        font-size: 1.8em;
    }
}

/* New, refined print styles for A4 Landscape PDF export */
@media print {
    html, body {
        margin: 0;
        padding: 0;
        background: #fff;
    }

    .main-nav, .canvas-actions, .back-link {
        display: none !important; /* Hide all non-canvas elements */
    }

    .container, .canvas-container, #canvasToExport {
        width: 100%;
        height: auto;
        margin: 0;
        padding: 0;
        box-shadow: none;
        border-radius: 0;
        page-break-inside: avoid;
    }

    #canvasToExport {
        padding: 4mm; /* More Aggressive Margin Reduction */
        box-sizing: border-box;
    }

    .canvas-header {
        margin-bottom: 3px; /* Final 3px gap */
        page-break-after: avoid; /* Prevent a page break right after the header */
    }

    .canvas-header h1 {
        font-size: 15pt;
        margin-bottom: 1.5mm; /* More Aggressive Gap Reduction */
    }

    .canvas-header .subtitle {
        font-size: 10pt;
        color: #718096;
        margin-bottom: 0;
    }

    .canvas {
        gap: 6px; /* Tighter gap */
        border: 1px solid #ddd;
        padding: 6px;
        page-break-inside: avoid;
    }

    .box {
        border: 1px solid #ccc;
        font-size: 7pt; /* Slightly smaller font */
        overflow-wrap: break-word; /* ENSURE TEXT VISIBLE */
        page-break-inside: avoid;
    }

    .box h2 {
        font-size: 8pt;
        padding: 2px;
    }

    .box ul {
        padding: 2px 4px;
    }
     .box li {
        padding: 1px 0 1px 8px;
    }
}

/* --- SWOT Quadrant Styles --- */
.swot-container {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.swot-quadrant-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto; /* Let rows size to content */
    border: 2px solid #a3b3f7;
    margin-top: 20px;
    width: 100%;
    background: white;
}

.swot-quadrant {
    padding: 25px;
    position: relative;
    min-height: 250px; /* Give quadrants a minimum height */
}

.swot-quadrant:nth-child(1) { /* Strengths */
    border-right: 1px solid #d2d6dc;
    border-bottom: 1px solid #d2d6dc;
}
.swot-quadrant:nth-child(2) { /* Weaknesses */
    border-bottom: 1px solid #d2d6dc;
}
.swot-quadrant:nth-child(3) { /* Opportunities */
    border-right: 1px solid #d2d6dc;
}

.swot-quadrant-label {
    font-weight: bold;
    font-size: 1.5em;
    color: #667eea;
    margin-bottom: 15px;
    display: block;
}

.swot-quadrant ul {
    list-style: none;
    padding-left: 0;
}
.swot-quadrant li {
    padding: 8px 0;
    color: #4a5568;
    line-height: 1.5;
    position: relative;
    padding-left: 20px;
}
.swot-quadrant li::before {
    content: '✓'; /* Use a check for positive items */
    position: absolute;
    left: 0;
    color: #68d391;
    font-weight: bold;
}
.swot-quadrant.weaknesses li::before,
.swot-quadrant.threats li::before {
    content: '✗'; /* Use an X for negative items */
    color: #f56565;
}

/* --- List Item Action Buttons --- */
.canvas-list li, .box ul, .swot-quadrant ul, .proposal-content ul {
    position: relative;
}

.list-actions {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    display: none; /* Hidden by default */
    gap: 5px;
}

li:hover .list-actions {
    display: flex; /* Show on hover */
}

.list-action-btn {
    background-color: #e2e8f0;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
    font-weight: bold;
    color: #4a5568;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
}

.list-action-btn:hover {
    background-color: #cbd5e0;
}
.list-action-btn.add-item {
    background-color: #9ae6b4;
    color: #276749;
}
.list-action-btn.add-item:hover {
    background-color: #68d391;
}
.list-action-btn.remove-item {
    background-color: #feb2b2;
    color: #9b2c2c;
}
.list-action-btn.remove-item:hover {
    background-color: #f56565;
}


/* --- Proposal Page Styles --- */
.proposal-container {
    background: white;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 8.5in; /* Standard paper width */
    margin: 20px auto;
}

.proposal-header h1 {
    font-size: 2.5em;
    margin-bottom: 30px;
    border-bottom: 2px solid #e2e8f0;
    padding-bottom: 20px;
}

.proposal-content section {
    margin-bottom: 30px;
}

.proposal-content h2 {
    font-size: 1.8em;
    color: #667eea;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #e2e8f0;
}

.proposal-content h3 {
    font-size: 1.2em;
    color: #4a5568;
    margin-top: 15px;
    margin-bottom: 10px;
}

.proposal-content p, .proposal-content li {
    font-size: 1.1em;
    line-height: 1.7;
    color: #2d3748;
}

.proposal-content ul {
    list-style-position: inside;
    padding-left: 10px;
}

.proposal-content .phase {
    margin-bottom: 15px;
}
.proposal-content .phase h3 {
    margin: 0 0 5px 0;
}

/* --- Roadmap Page Styles --- */
.roadmap-container {
    background: white;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.roadmap-header h1 {
    font-size: 2.5em;
    text-align: center;
}

.roadmap-quarter {
    margin-bottom: 30px;
    border-left: 3px solid #667eea;
    padding-left: 20px;
}

.roadmap-quarter h3 {
    font-size: 1.8em;
    color: #4a5568;
    margin-bottom: 15px;
}

.milestone {
    background-color: #f7fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
}

.milestone h4 {
    font-size: 1.2em;
    color: #2d3748;
    margin-bottom: 5px;
}

.milestone p {
    color: #718096;
    margin-bottom: 10px;
}

.target-date {
    font-weight: bold;
    color: #667eea;
}

/* --- Loading Overlay Styles --- */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
}

.spinner {
    border: 8px solid #f3f3f3;
    border-top: 8px solid #667eea;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}


@media print {
    /* Hide non-essential elements for SWOT print view */
    .swot-container .main-nav,
    .swot-container .swot-actions,
    .swot-container .back-link {
        display: none !important;
    }

    /* Adjust SWOT container for printing */
    .swot-container {
        box-shadow: none !important;
        border-radius: 0 !important;
        padding: 0 !important;
    }

    #swotToExport {
        width: 100%;
        height: 100%;
        padding: 5mm;
        box-sizing: border-box;
    }

    .swot-quadrant-container {
        height: 100%;
        border: 1px solid #000;
    }

    .swot-quadrant-label {
        font-size: 14pt;
    }

    .swot-quadrant li {
        font-size: 9pt;
    }

    /* --- Proposal Print Styles --- */
    .proposal-actions, .main-nav, .back-link,
    .roadmap-actions, .swot-actions {
        display: none !important;
    }

    .proposal-container {
        border: none !important;
        box-shadow: none !important;
        padding: 0 !important;
        margin: 0 !important;
        width: 100%;
        max-width: 100%;
    }

    #proposalToExport {
        padding: 10mm;
        box-sizing: border-box;
    }

    .proposal-header h1 {
        font-size: 22pt;
        border: none;
        padding-bottom: 10mm;
    }

    .proposal-content section {
        border-bottom: 1px solid #ccc;
        padding-bottom: 8mm;
        margin-bottom: 8mm;
        page-break-inside: avoid;
    }

    .proposal-content section:last-child {
        border-bottom: none;
    }

    .proposal-content h2 {
        font-size: 16pt;
        border: none;
    }
}